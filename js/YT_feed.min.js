$(document).ready(function(){function e(){var e=$.Deferred();return $.ajax({url:"php/send_ids.php",data:a,success:function(t){e.resolve(n=$.makeArray(JSON.parse(t)))},error:function(t){e.reject(t)}}),e.promise()}function t(e){return 4==e?($("#pop-up").show(),setTimeout(function(){$("#pop-up").hide()},1e4),0):e+1}var a,n,o,i=($("#chanSelector"),$("#sendChoices"),0),d=0;a="cat[]=all&len[]=short",e().done(function(e){window.vids=e;var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api/";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}).fail(function(e){console.log(e)});var c;window.onYouTubeIframeAPIReady=function(){function e(e){0===e.data&&(i+=1,d=t(d),c.loadVideoById(n[i]))}c=new YT.Player("player",{height:"390",width:"640",videoId:n[i],playerVars:{autoplay:1,fs:1,modestbranding:1},events:{onStateChange:e}}),$("#prev").click(function(){0==i?i=n.length-1:i-=1,d=t(d),c.loadVideoById(n[i])}),$("#next").click(function(){i==n.length-1?i=0:i+=1,d=t(d),c.loadVideoById(n[i])}),$("#prevtext").click(function(){0==i?i=n.length-1:i-=1,d=t(d),c.loadVideoById(n[i])}),$("#nexttext").click(function(){i==n.length-1?i=0:i+=1,d=t(d),c.loadVideoById(n[i])});var a=$("#channel-sel");a.submit(function(e){e.preventDefault(),e.stopPropagation();var o=a.serialize();$.ajax({url:"php/send_ids.php",data:o,success:function(e){n=$.makeArray(JSON.parse(e)),i=0,d=t(d),c.loadVideoById(n[i]),$("#set-blank").tab("show")}})})},window.onkeyup=function(e){var a=e.keyCode?e.keyCode:e.which;32==a&&(1==c.getPlayerState()?c.pauseVideo(n[i]):c.playVideo(n[i])),77==a&&(0==c.isMuted()?c.mute(n[i]):c.unMute(n[i])),70==a&&(1==c.getPlaybackRate()&&c.setPlaybackRate(1.5),1.5==c.getPlaybackRate()&&c.setPlaybackRate(2),2==c.getPlaybackRate()&&c.setPlaybackRate(1)),82==a&&(1==c.getPlaybackRate()&&c.setPlaybackRate(.5),.5==c.getPlaybackRate()&&c.setPlaybackRate(.25),.25==c.getPlaybackRate()&&c.setPlaybackRate(1)),85==a&&(1==c.isMuted()&&c.unMute(n[i]),0==c.isMuted()&&(o=c.getVolume(),o+=5,c.setVolume(o))),68==a&&(1==c.isMuted()&&c.unMute(n[i]),0==c.isMuted()&&(o=c.getVolume(),o-=5,c.setVolume(o))),37==a&&(0==i?i=n.length-1:i-=1,d=t(d),c.loadVideoById(n[i])),39==a&&(i==n.length-1?i=0:i+=1,d=t(d),c.loadVideoById(n[i]))}});