$(document).ready(function(){function e(e){return 4==e?($("#pop-up").show(),setTimeout(function(){$("#pop-up").hide()},1e4),0):e+1}var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api/";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a);var n,o,d,i=($("#chanSelector"),$("#sendChoices"),0),c=0;n="cat[]=sci&cat[]=nat&len[]=short",$.ajax({url:"php/send_ids.php",data:n,success:function(e){o=$.makeArray(JSON.parse(e)),i=0}});var l;window.onYouTubeIframeAPIReady=function(){function t(t){0===t.data&&(i+=1,c=e(c),l.loadVideoById(o[i]))}l=new YT.Player("player",{height:"390",width:"640",videoId:o[i],playerVars:{autoplay:1,fs:1,modestbranding:1},events:{onStateChange:t}}),$("#prev").click(function(){0==i?i=o.length-1:i-=1,c=e(c),l.loadVideoById(o[i])}),$("#next").click(function(){i==o.length-1?i=0:i+=1,c=e(c),l.loadVideoById(o[i])}),$("#prevtext").click(function(){0==i?i=o.length-1:i-=1,c=e(c),l.loadVideoById(o[i])}),$("#nexttext").click(function(){i==o.length-1?i=0:i+=1,c=e(c),l.loadVideoById(o[i])});var a=$("#channel-sel");a.submit(function(t){t.preventDefault(),t.stopPropagation();var n=a.serialize();$.ajax({url:"php/send_ids.php",data:n,success:function(t){o=$.makeArray(JSON.parse(t)),i=0,c=e(c),l.loadVideoById(o[i]),$("#set-blank").tab("show")}})})},window.onkeyup=function(t){var a=t.keyCode?t.keyCode:t.which;32==a&&(1==l.getPlayerState()?l.pauseVideo(o[i]):l.playVideo(o[i])),77==a&&(0==l.isMuted()?l.mute(o[i]):l.unMute(o[i])),70==a&&(1==l.getPlaybackRate()&&l.setPlaybackRate(1.5),1.5==l.getPlaybackRate()&&l.setPlaybackRate(2),2==l.getPlaybackRate()&&l.setPlaybackRate(1)),82==a&&(1==l.getPlaybackRate()&&l.setPlaybackRate(.5),.5==l.getPlaybackRate()&&l.setPlaybackRate(.25),.25==l.getPlaybackRate()&&l.setPlaybackRate(1)),85==a&&(1==l.isMuted()&&l.unMute(o[i]),0==l.isMuted()&&(d=l.getVolume(),d+=5,l.setVolume(d))),68==a&&(1==l.isMuted()&&l.unMute(o[i]),0==l.isMuted()&&(d=l.getVolume(),d-=5,l.setVolume(d))),37==a&&(0==i?i=o.length-1:i-=1,c=e(c),l.loadVideoById(o[i])),39==a&&(i==o.length-1?i=0:i+=1,c=e(c),l.loadVideoById(o[i]))}});