$(document).ready(function(){function e(){var e=$.Deferred();return $.ajax({url:"php/send_ids.php",data:a,success:function(t){e.resolve(n=$.makeArray(JSON.parse(t)))},error:function(t){e.reject(t)}}),e.promise()}function t(e){return 4==e?($("#pop-up").show(),setTimeout(function(){$("#pop-up").hide()},1e4),0):e+1}var a,n,o,i=($("#chanSelector"),$("#sendChoices"),0),c=0;a="cat[]=sci&cat[]=nat&len[]=short",e().done(function(e){window.vids=e;var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api/";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}).fail(function(e){console.log(e)});var d;window.onYouTubeIframeAPIReady=function(){function e(e){0===e.data&&(i+=1,c=t(c),d.loadVideoById(n[i]))}d=new YT.Player("player",{height:"390",width:"640",videoId:n[i],playerVars:{autoplay:1,fs:1,modestbranding:1},events:{onStateChange:e}}),$("#prev").click(function(){0==i?i=n.length-1:i-=1,c=t(c),d.loadVideoById(n[i])}),$("#next").click(function(){i==n.length-1?i=0:i+=1,c=t(c),d.loadVideoById(n[i])}),$("#prevtext").click(function(){0==i?i=n.length-1:i-=1,c=t(c),d.loadVideoById(n[i])}),$("#nexttext").click(function(){i==n.length-1?i=0:i+=1,c=t(c),d.loadVideoById(n[i])});var a=$("#channel-sel");a.submit(function(e){e.preventDefault(),e.stopPropagation();var o=a.serialize();$.ajax({url:"php/send_ids.php",data:o,success:function(e){n=$.makeArray(JSON.parse(e)),i=0,c=t(c),d.loadVideoById(n[i]),$("#set-blank").tab("show")}})})},window.onkeyup=function(e){var a=e.keyCode?e.keyCode:e.which;32==a&&(1==d.getPlayerState()?d.pauseVideo(n[i]):d.playVideo(n[i])),77==a&&(0==d.isMuted()?d.mute(n[i]):d.unMute(n[i])),70==a&&(1==d.getPlaybackRate()&&d.setPlaybackRate(1.5),1.5==d.getPlaybackRate()&&d.setPlaybackRate(2),2==d.getPlaybackRate()&&d.setPlaybackRate(1)),82==a&&(1==d.getPlaybackRate()&&d.setPlaybackRate(.5),.5==d.getPlaybackRate()&&d.setPlaybackRate(.25),.25==d.getPlaybackRate()&&d.setPlaybackRate(1)),85==a&&(1==d.isMuted()&&d.unMute(n[i]),0==d.isMuted()&&(o=d.getVolume(),o+=5,d.setVolume(o))),68==a&&(1==d.isMuted()&&d.unMute(n[i]),0==d.isMuted()&&(o=d.getVolume(),o-=5,d.setVolume(o))),37==a&&(0==i?i=n.length-1:i-=1,c=t(c),d.loadVideoById(n[i])),39==a&&(i==n.length-1?i=0:i+=1,c=t(c),d.loadVideoById(n[i]))}});