$(document).ready(function(){function i(){var a=$.Deferred();return $.ajax({url:"php/send_ids.php",data:d,success:function(b){a.resolve(e=$.makeArray(JSON.parse(b)))},error:function(b){a.reject(b)}}),a.promise()}function k(a){return 4==a?($("#pop-up").show(),setTimeout(function(){$("#pop-up").hide()},1e4),0):a+1}var d,e,g,f=($("#chanSelector"),$("#sendChoices"),0),h=0;d="cat[]=all&len[]=short",i().done(function(a){window.vids=a;var b=document.createElement("script");b.src="https://www.youtube.com/iframe_api/";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}).fail(function(a){console.log(a)});var j;window.onYouTubeIframeAPIReady=function(){function a(a){0===a.data&&(f+=1,h=k(h),j.loadVideoById(e[f]))}j=new YT.Player("player",{height:"390",width:"640",videoId:e[f],playerVars:{autoplay:1,fs:1,modestbranding:1},events:{onStateChange:a},playsinline:1}),$("#prev").click(function(){0==f?f=e.length-1:f-=1,h=k(h),j.loadVideoById(e[f])}),$("#next").click(function(){f==e.length-1?f=0:f+=1,h=k(h),j.loadVideoById(e[f])}),$("#prevtext").click(function(){0==f?f=e.length-1:f-=1,h=k(h),j.loadVideoById(e[f])}),$("#nexttext").click(function(){f==e.length-1?f=0:f+=1,h=k(h),j.loadVideoById(e[f])});var b=$("#channel-sel");b.submit(function(a){a.preventDefault(),a.stopPropagation();var c=b.serialize();$.ajax({url:"php/send_ids.php",data:c,success:function(a){e=$.makeArray(JSON.parse(a)),f=0,h=k(h),j.loadVideoById(e[f]),$("#set-blank").tab("show")}})})},window.onkeyup=function(a){var b=a.keyCode?a.keyCode:a.which;32==b&&(1==j.getPlayerState()?j.pauseVideo(e[f]):j.playVideo(e[f])),77==b&&(0==j.isMuted()?j.mute(e[f]):j.unMute(e[f])),70==b&&(1==j.getPlaybackRate()&&j.setPlaybackRate(1.5),1.5==j.getPlaybackRate()&&j.setPlaybackRate(2),2==j.getPlaybackRate()&&j.setPlaybackRate(1)),82==b&&(1==j.getPlaybackRate()&&j.setPlaybackRate(.5),.5==j.getPlaybackRate()&&j.setPlaybackRate(.25),.25==j.getPlaybackRate()&&j.setPlaybackRate(1)),85==b&&(1==j.isMuted()&&j.unMute(e[f]),0==j.isMuted()&&(g=j.getVolume(),g+=5,j.setVolume(g))),68==b&&(1==j.isMuted()&&j.unMute(e[f]),0==j.isMuted()&&(g=j.getVolume(),g-=5,j.setVolume(g))),37==b&&(0==f?f=e.length-1:f-=1,h=k(h),j.loadVideoById(e[f])),39==b&&(f==e.length-1?f=0:f+=1,h=k(h),j.loadVideoById(e[f]))}});